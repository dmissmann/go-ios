package main

import (
	"bytes"
	"encoding/base64"
	"encoding/json"
	"fmt"
	"github.com/danielpaulus/go-ios/ios/xpc"
	log "github.com/sirupsen/logrus"
	"golang.org/x/net/http2"
	"io"
)

func main() {
	b64 := "UFJJICogSFRUUC8yLjANCg0KU00NCg0KAAAMBAAAAAAAAAMAAABkAAQAEAAAAAAECAAAAAAAAA8AAQAAAAEEAAAAAQAALAAAAAAAAZILsCkBAAAAFAAAAAAAAAAAAAAAAAAAAEI3E0IFAAAAAPAAAAQAAAAAAAAAAAAYAAAAAAABkguwKQECAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQQAAAADAAAYAAAAAAADkguwKQEAQAAAAAAAAAAAAAAAAAAAAAAAAAAABAEAAAAAAAdQAAAAAAABkguwKQEBAAA4BwAAAAAAAAEAAAAAAAAAQjcTQgUAAAAA8AAAKAcAAAUAAABNZXNzYWdlVHlwZQAAkAAACgAAAEhhbmRzaGFrZQAAAE1lc3NhZ2luZ1Byb3RvY29sVmVyc2lvbgAAAAAAQAAAAwAAAAAAAABTZXJ2aWNlcwAAAAAA8AAAJAEAAAIAAABzc2gAAPAAAGQAAAADAAAAUHJvcGVydGllcwAAAPAAABQAAAABAAAATGVnYWN5AAAAIAAAAQAAAFBvcnQAAAAAAJAAAAMAAAAyMgAARW50aXRsZW1lbnQAAJAAAA4AAABBcHBsZUludGVybmFsAAAAY29tLmFwcGxlLm9zYW5hbHl0aWNzLmxvZ1JlbGF5AAAA8AAAiAAAAAMAAABQcm9wZXJ0aWVzAAAA8AAAHAAAAAEAAABVc2VzUmVtb3RlWFBDAAAAACAAAAEAAABQb3J0AAAAAACQAAAGAAAANTIwNzkAAABFbnRpdGxlbWVudAAAkAAAJgAAAGNvbS5hcHBsZS5TdWJtaXREaWFnSW5mby50b3dlci1hY2Nlc3MAAABQcm9wZXJ0aWVzAAAA8AAAdAUAACsAAABUaGlubmluZ1Byb2R1Y3RUeXBlAACQAAAPAAAATWFjQm9va1BybzE4LDMAAEh1bWFuUmVhZGFibGVQcm9kdWN0VmVyc2lvblN0cmluZwAAAACQAAAFAAAAMTQuMAAAAABIYXNTRVAAAAAgAAABAAAASFdNb2RlbAAAkAAACAAAAEozMTRzQVAARWZmZWN0aXZlUHJvZHVjdGlvblN0YXR1c1NFUAAAAAAAIAAAAQAAAENoaXBJRAAAAEAAAABgAAAAAAAAQ1BVQXJjaGl0ZWN0dXJlAACQAAAHAAAAYXJtNjRlAABBcHBsZUludGVybmFsAAAAACAAAAAAAABSZWdpb25JbmZvAAAAkAAABAAAAEQvQQBJc1VJQnVpbGQAAAAAIAAAAQAAAFN1cHBsZW1lbnRhbEJ1aWxkVmVyc2lvbgAAAAAAkAAABwAAADIzQTM0NAAAU2lnbmluZ0Z1c2UAACAAAAEAAABFZmZlY3RpdmVTZWN1cml0eU1vZGVBcAAAIAAAAQAAAERldmljZVN1cHBvcnRzTG9ja2Rvd24AAAAgAAAAAAAAUmVzdG9yZUxvbmdWZXJzaW9uAAAAkAAADwAAADIzLjEuMzQ0LjAuMCwwAABTZXJpYWxOdW1iZXIAAAAAAJAAAAsAAABZTDkyNFZZSjlZAABQcm9kdWN0VHlwZQAAkAAADwAAAE1hY0Jvb2tQcm8xOCwzAABQcm9kdWN0TmFtZQAAkAAABgAAAG1hY09TAAAATW9iaWxlRGV2aWNlTWluaW11bVZlcnNpb24AAACQAAAFAAAAMTYwMAAAAABJbWFnZTRDcnlwdG9IYXNoTWV0aG9kAAAAkAAACQAAAHNoYTItMzg0AAAAAFNlbnNpdGl2ZVByb3BlcnRpZXNWaXNpYmxlAAAAIAAAAQAAAEJyaWRnZVZlcnNpb24AAAAAkAAAEAAAADIxLjE2LjM2NS4wLjAsMABPU1ZlcnNpb24AAAAAkAAABQAAADE0LjAAAAAAQnVpbGRWZXJzaW9uAAAAAACQAAAHAAAAMjNBMzQ0AABVbmlxdWVEZXZpY2VJRAAAAJAAABoAAAAwMDAwNjAwMC0wMDA0NzA1MjAxNjI4MDFFAAAAVW5pcXVlQ2hpcElEAAAAAABAAAAegGIBUnAEAEVmZmVjdGl2ZVNlY3VyaXR5TW9kZVNFUAAAAAAAIAAAAQAAAEVmZmVjdGl2ZVByb2R1Y3Rpb25TdGF0dXNBcAAAIAAAAQAAAERldmljZUNvbG9yAACQAAAIAAAAdW5rbm93bgBCb2FyZElkAABAAAAIAAAAAAAAAEJvb3RTZXNzaW9uVVVJRAAAoAAAVbLCHVQ/SO6gRObTRcQafVNlY3VyaXR5RG9tYWluAAAAQAAAAQAAAAAAAABSZWdpb25Db2RlAAAAkAAAAgAAAEQAAABNb2RlbE51bWJlcgAAkAAACgAAAFoxNUcwMDIyVAAAAERldmljZUVuY2xvc3VyZUNvbG9yAAAAAACQAAACAAAAMgAAAERldmljZUNsYXNzAACQAAAEAAAATWFjAENlcnRpZmljYXRlU2VjdXJpdHlNb2RlAAAgAAABAAAAQ2VydGlmaWNhdGVQcm9kdWN0aW9uU3RhdHVzAAAgAAABAAAAUmVtb3RlWFBDVmVyc2lvbkZsYWdzAAAAAEAAAAYAAAAAAAABT1NJbnN0YWxsRW52aXJvbm1lbnQAAAAAACAAAAAAAABJc1ZpcnR1YWxEZXZpY2UAACAAAAAAAABJbWFnZTRTdXBwb3J0ZWQAACAAAAEAAABIYXJkd2FyZVBsYXRmb3JtAAAAAACQAAAGAAAAdDYwMDAAAABVVUlEAAAAAACgAADQgYHrQdBFq4u7dkLby341AABoAAAAAAABkguwKQEBAQBQAAAAAAAAAAMAAAAAAAAAQjcTQgUAAAAA8AAAQAAAAAIAAABNZXNzYWdlVHlwZQAAkAAACgAAAEhlYXJ0YmVhdAAAAFNlcXVlbmNlTnVtYmVyAAAAQAAAAQAAAAAAAAAAAGgAAAAAAAGSC7ApAQEBAFAAAAAAAAAABQAAAAAAAABCNxNCBQAAAADwAABAAAAAAgAAAE1lc3NhZ2VUeXBlAACQAAAKAAAASGVhcnRiZWF0AAAAU2VxdWVuY2VOdW1iZXIAAABAAAACAAAAAAAAAAAAaAAAAAAAAZILsCkBAQEAUAAAAAAAAAAHAAAAAAAAAEI3E0IFAAAAAPAAAEAAAAACAAAATWVzc2FnZVR5cGUAAJAAAAoAAABIZWFydGJlYXQAAABTZXF1ZW5jZU51bWJlcgAAAEAAAAMAAAAAAAAAAABoAAAAAAABkguwKQEBAQBQAAAAAAAAAAkAAAAAAAAAQjcTQgUAAAAA8AAAQAAAAAIAAABNZXNzYWdlVHlwZQAAkAAACgAAAEhlYXJ0YmVhdAAAAFNlcXVlbmNlTnVtYmVyAAAAQAAABAAAAAAAAAAAAGgAAAAAAAGSC7ApAQEBAFAAAAAAAAAACwAAAAAAAABCNxNCBQAAAADwAABAAAAAAgAAAE1lc3NhZ2VUeXBlAACQAAAKAAAASGVhcnRiZWF0AAAAU2VxdWVuY2VOdW1iZXIAAABAAAAFAAAAAAAAAA=="
	//b64 := "AAAMBAAAAAAAAAMAAABkAAQAEAAAAAAECAAAAAAAAA8AAQAAAAQBAAAAAAAAAAEEAAAAAQAASAAAAAAAAZILsCkBAAAAMAAAAAAAAAAAAAAAAAAAAEI3E0IFAAAAAPAAACAAAAABAAAAU2VydmljZVZlcnNpb24AAAAwAAACAAAAAAAAAAAAAAEEAAAAAwAAGAAAAAAAAZILsCkBAgAAAAAAAAAAAAAAAAAAAAAAAAAAGAAAAAAAA5ILsCkBAEAAAAAAAAAAAAAAAAAAAAAAAAAGVAAAAAAAAZILsCkBAQAAPAYAAAAAAAACAAAAAAAAAEI3E0IFAAAAAPAAACwGAAACAAAAbWFuZ2xlZFR5cGVOYW1lAACQAAAyAAAAUmVtb3RlUGFpcmluZ0RldmljZS5Db250cm9sQ2hhbm5lbE1lc3NhZ2VFbnZlbG9wZQAAAHZhbHVlAAAAAPAAAMwFAAADAAAAbWVzc2FnZQAA8AAAfAUAAAEAAABwbGFpbgAAAADwAABoBQAAAQAAAF8wAAAA8AAAWAUAAAEAAAByZXNwb25zZQAAAAAA8AAAQAUAAAIAAABfMQAAAPAAAAwFAAABAAAAaGFuZHNoYWtlAAAAAPAAAPQEAAABAAAAXzAAAADwAADkBAAABAAAAG1pbmltdW1TdXBwb3J0ZWRXaXJlUHJvdG9jb2xWZXJzaW9uAAAwAAAIAAAAAAAAAHBlZXJEZXZpY2VJbmZvAAAA8AAApAMAAAcAAABpZGVudGlmaWVyAAAAkAAAGgAAADAwMDA4MDIwLTAwMTk1MENDMDFFQTAwMkUAAABkZXZpY2VLVlNJbmNsdWRlc1NlbnNpdGl2ZUluZm8AAAAgAAABAAAAdWRpZAAAAAAAkAAAGgAAADAwMDA4MDIwLTAwMTk1MENDMDFFQTAwMkUAAABtb2RlbAAAAACQAAALAAAAaVBob25lMTEsNgAAbmFtZQAAAAAAkAAABwAAAGlQaG9uZQAAZGV2aWNlS1ZTRGF0YQAAAACAAAC7AgAAYnBsaXN0MDDSAQIDCF8QGGNvbS5hcHBsZS5tb2JpbGUubGR3YXRjaFROVUxM0gQFBgZfEA93YXRjaC1jb21wYW5pb25fEBhXYXRjaENvbXBhbmlvbkNhcGFiaWxpdHkJCd8QEwkKCwwNDg8QERITFBUWFxgZGhscHRwfIAYiIyQlJicfKCQpKikfW0RldmljZUNvbG9yXxAXU3VwcG9ydGVkRGV2aWNlRmFtaWxpZXNfEBREZXZpY2VFbmNsb3N1cmVDb2xvcl8QFlVzZXJBc3NpZ25lZERldmljZU5hbWVbUHJvZHVjdFR5cGVfEBZEZXZpY2VTdXBwb3J0c0xvY2tkb3duXlVuaXF1ZURldmljZUlEXEJ1aWxkVmVyc2lvbl8QE01hcmtldGluZ05hbWVTdHJpbmdbUHJvZHVjdE5hbWVfEA9DUFVBcmNoaXRlY3R1cmVcVW5pcXVlQ2hpcElEW0RldmljZUNsYXNzXlByb2R1Y3RWZXJzaW9uXm1hcmtldGluZy1uYW1lWkhXTW9kZWxTdHJfEBpNb2JpbGVEZXZpY2VNaW5pbXVtVmVyc2lvbl1IYXJkd2FyZU1vZGVsWkRldmljZU5hbWVRMaEeEAFWaVBob25lWmlQaG9uZTExLDYJXxAZMDAwMDgwMjAtMDAxOTUwQ0MwMUVBMDAyRVYyMUEzNjBdaVBob25lIFhTIE1heFlpUGhvbmUgT1NWYXJtNjRlEwAZUMwB6gAuVjE3LjAuM1dEMzMxcEFQVDE2MDAACAANACgALQAyAEQAXwBgAGEAigCWALAAxwDgAOwBBQEUASEBNwFDAVUBYgFuAX0BjAGXAbQBwgHNAc8B0QHTAdoB5QHmAgICCQIXAiECKAIxAjgCQAAAAAAAAAIBAAAAAAAAACsAAAAAAAAAAAAAAAAAAAJFAGVjaWQAAAAAAEAAAC4A6gHMUBkAd2lyZVByb3RvY29sVmVyc2lvbgAAMAAAEwAAAAAAAABkZXZpY2VPcHRpb25zAAAAAPAAALwAAAAFAAAAYWxsb3dzU2hhcmluZ1NlbnNpdGl2ZUluZm8AAAAgAAABAAAAYWxsb3dzUHJvbXB0bGVzc0F1dG9tYXRpb25QYWlyaW5nVXBncmFkZQAAAAAAIAAAAQAAAGFsbG93c1BhaXJTZXR1cAAAIAAAAQAAAGFsbG93c1Bpbmxlc3NQYWlyaW5nAAAAAAAgAAABAAAAYWxsb3dzSW5jb21pbmdUdW5uZWxDb25uZWN0aW9ucwAAIAAAAQAAAGZvclJlcXVlc3RJZGVudGlmaWVyAAAAAABAAAAAAAAAAAAAAHNlcXVlbmNlTnVtYmVyAAAAQAAAAAAA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"
	b := base64Decode(b64)

	reader := bytes.NewReader(b)
	if string(b[:3]) == "PRI" {
		io.CopyN(io.Discard, reader, 24)
	}
	f := http2.NewFramer(io.Discard, reader)

	buf := bytes.NewBuffer(nil)

	for {
		f, err := f.ReadFrame()
		if err != nil {
			break
		}
		log.Printf("stream id %s:%d", f.Header().Type.String(), f.Header().StreamID)
		if f.Header().Type == http2.FrameData {
			d := f.(*http2.DataFrame)
			buf.Write(d.Data())
		}
	}

	for {
		m, err := xpc.DecodeMessage(buf)
		if err != nil {
			panic(err)
		}
		//fmt.Printf("%+v\n", m)
		b, _ := json.Marshal(m)
		out := bytes.NewBuffer(nil)
		json.Compact(out, b)
		//fmt.Printf("%s\n", string(out.Bytes()))
		fmt.Printf("%s\n", m)
	}
}

func base64Decode(s string) []byte {
	dst := make([]byte, base64.StdEncoding.DecodedLen(len(s)))
	_, err := base64.StdEncoding.Decode(dst, []byte(s))
	if err != nil {
		panic(err)
	}
	return dst
}
